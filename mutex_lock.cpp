
/*********************************************************************
*
*   NAME:
*       mutex_lock.cpp
*
*   DESCRIPTION:
*       API for mutex locking using RAII
*
*   Copyright 2023 Nate Lenze
*
*********************************************************************/

/*--------------------------------------------------------------------
                              INCLUDES
--------------------------------------------------------------------*/
#include "mutex_lock.hpp"

/*--------------------------------------------------------------------
                          GLOBAL NAMESPACE
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                          LITERAL CONSTANTS
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                                TYPES
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                           MEMORY CONSTANTS
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                              VARIABLES
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                                MACROS
--------------------------------------------------------------------*/

/*--------------------------------------------------------------------
                              PROCEDURES
--------------------------------------------------------------------*/
/*--------------------------------------------------------------------
mutex_lock()
--------------------------------------------------------------------*/
/*********************************************************************
*
*   PROCEDURE NAME:
*       mutex_lock::mutex_lock (constructor)
*
*   DESCRIPTION:
*       mutex_lock class constructor
*
*********************************************************************/
utl::mutex_lock::mutex_lock
    ( 
    mutex_t& mut                      /* mutex in question to lock */
    ) :
    p_mut( mut )
{
// this->p_mut = mut;
mutex_enter_blocking( &p_mut ); 
}

/*********************************************************************
*
*   PROCEDURE NAME:
*       mutex_lock::~mutex_lock (deconstructor)
*
*   DESCRIPTION:
*       mutex_lock class deconstructor
*
*********************************************************************/
utl::mutex_lock::~mutex_lock
    ( 
    void 
    ) 
{
mutex_exit( &p_mut );
}
